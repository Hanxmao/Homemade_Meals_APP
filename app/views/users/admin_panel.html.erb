
<h2 class="text-center"><%=@user.username%>'s Admin Panel</h2>

<div class="d-flex flex-row justify-content-around">

    <div class="" id="user_profile_container">
        <img src="<%@user.profile_img_url%>">
        <div id="user_profile_infomation">
            <p><strong>Name: </strong><%=@user.username%></p>
            <p><strong>Email: </strong><%=@user.email%></p>
            <% if(@user.meals) %>
                <p><strong>Meals Number: </strong><%=@user.meals.count%></p>
            <% end %>
            <% if(@user.reviews) %>
                <p><strong>Reviews Number: </strong><%=@user.reviews.count%></p>
            <% end %>
        </div>
    </div>


    <div>
        <% if (@user.is_cook) %>
            <%= button_to "Create a new Meal", meal_path, method: :get, class: "btn btn-outline-primary my-3"%>
            <div class="card" id="user_container">
                <h5>Current Meals</h5>
                <%@meals = @user.meals%>
                <div class="d-flex flex-column">
                    <% @meals.each do |meal| %>
                        <div class="card m-3 py-3" style="width: 30rem;">
                            <img src="<%= meal.img_url%>" class="card-img-top " alt="" style="width: 20rem; height: 10rem">
                            <div class="card-body">
                                <h5 class="card-title"><a href="<%=meal_path(meal)%>" class="text-decoration-none"><%= meal.title%></a></h5>
                                <p class="card-text text-truncate"><%= meal.description%></p>
                                <%= button_to "Edit", edit_meal_path(meal), method: :get, class: "btn btn-outline-primary my-3"%>
                                <%= button_to "Delete", meal_path(meal), method: :delete, form: {data: {turbo_confirm: 'Are you sure?'}}, class:"btn btn-outline-primary me-2"%>
                            </div>
                        </div>
                    <% end %>
                </div>
            </div>

        
        <%else%>
            <div class="container d-flex flex-column">
            <div class="d-flex flex-row justify-content-center">
                <h2><%=@user.username%>'s Review</h2>
            </div>
            <%@reviews = @user.reviews%>
            <div class="row row-cols-2 ms-3">
                    <% @reviews.each do |review| %>
                        <div class="card col m-3 py-3" style="width: 25rem;">
                            <div class="card-body">
                                <h5 class="card-title"><a href="<%=meal_path(review.meal)%>" class="text-decoration-none"><%= review.meal.title%></a></h5>
                                <hr>
                                <span><strong>Rating: </strong>
                                    <%review.rating.times do %>
                                        â˜…
                                    <% end %>
                                </span>
                                <p class="card-text text-truncate"><%= review.body%></p>
                                <span class="d-flex flex-row align-items-end"><small style="font-size: 12px;"> Commented at<%= comment.created_at%> </small>
                                <%= button_to "Delete", meal_review_path(review.meal, review), method: :delete, form: {data: {turbo_confirm: 'Are you sure?'}}, class:"btn btn-outline-primary me-2"%>
                            </div>
                        </div>
                    <% end %>
                </div>
            </div>
        <%end%>
    </div>
</div>

